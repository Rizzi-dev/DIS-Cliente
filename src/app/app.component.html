<div class="container text-center card">
  <div class="row card-body">
    <div class="row">
      <div class="col-md-6">
        <div class="input-group mb-3">
          <span class="input-group-text" id="basic-addon1">Número de requisições</span>
          <input type="number" class="form-control" placeholder="Insira o número" aria-label="Número de requisições"
            aria-describedby="basic-addon1" [(ngModel)]="requisicoes">
        </div>
      </div>
      <div class="col-md-6">
        <div class="d-grid gap-2">
          <button type="button" class="btn btn-info" (click)="sendRequests()">Enviar</button>
        </div>
      </div>
    </div>
    <div class="accordion row" style="padding: 10px;" *ngIf="allReturns.length > 0" id="accordionRequests">
      <div *ngFor="let return of allReturns; let i = index" class="accordion-item">
        <h2 class="accordion-header">
          <button class="btn btn-secondary w-100" style="margin: 5px;" type="button" (click)="atualizarAccordion(i)">
            Requisição do usuário: {{ return.user }}
          </button>
        </h2>
        <div class="accordion-collapse collapse" [id]="'accordion_' + i">
          <div class="accordion-body">
            <fieldset disabled>
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label for="disabledTextInput" class="form-label">Início</label>
                    <input type="text" id="disabledTextInput" class="form-control" [value]="return.startTime">
                  </div>
                </div>
                <div class="col">
                  <div class="mb-3">
                    <label for="disabledTextInput" class="form-label">Fim</label>
                    <input type="text" id="disabledTextInput" class="form-control" [value]="return.endTime">
                  </div>
                </div>
                <div class="col">
                  <div class="mb-3">
                    <label for="disabledTextInput" class="form-label">Iterações</label>
                    <input type="text" id="disabledTextInput" class="form-control" [value]="return.iteracoes">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="input-group">
                    <span class="input-group-text">Vetor GrayScale Recebido</span>
                    <textarea class="form-control" style="height: 160px;" aria-label="With textarea"
                      [value]="return.imageVector"></textarea>
                  </div>
                </div>
              </div>
              <div style="margin-top: 10px;" class="row">
                <div class="col">
                  <div class="input-group mb-3">
                    <label class="input-group-text" id="basic-addon1">Imagem Recebida</label>
                    <img [src]="return.image" id="basic-addon1" alt="Imagem Recebida" class="form-control">
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row mt-4">
  <div class="col-12 d-flex justify-content-center">
    <button type="button" class="btn btn-warning" (click)="getServerStats()">Gerar Relatório de Desempenho</button>
  </div>
</div>

<div class="row" *ngIf="serverStats">
  <div class="col-md-12">
    <div class="card mt-3 p-3">
      <h5>Relatório de Desempenho do Servidor</h5>
      <p><strong>Uso de CPU:</strong> {{ serverStats.cpu }}%</p>
      <p><strong>Memória Usada:</strong> {{ serverStats.memory }} MB</p>
      <p><strong>Intervalo de Coleta:</strong> {{ serverStats.interval }} segundos</p>
    </div>
  </div>
</div>
